<!-- messaging/templates/agent_portal.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Portal</title>
</head>
<body>

  <h2>Agent Portal</h2>

  {% if messages %}
    <ul>
      {% for message in messages %}
      <div>
        <p>{{ message.sender_name }} - {{ message.timestamp }}</p>
        <p>{{ message.message_text }}</p>
        <p>Agent Reply: {{ message.agent_reply }}</p>

        <!-- Reply Form for each message -->
        <form method="post" action="{% url 'agent_portal' %}">
            {% csrf_token %}
            <input type="hidden" name="message_id" value="{{ message.id }}">
            {{ reply_form.as_p }}
            <input type="submit" value="Submit Reply">
        </form>
    </div>
      {% endfor %}
    </ul>
  {% else %}
    <p>No messages available.</p>
  {% endif %}

</body>
</html>
